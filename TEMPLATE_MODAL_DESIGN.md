# 模板详情弹窗设计方案 🎨

## 📋 设计目标

解决模板展示区域信息显示不全的问题，提供沉浸式的模板详情查看体验。

---

## 🎯 核心问题分析

### 当前痛点
1. **右侧预览面板限制**：仅在 ≥1280px 屏幕显示
2. **卡片信息受限**：高度固定 120px，无法展示完整信息
3. **缺少详情视图**：用户无法深入了解模板特性

### 用户需求
- 快速浏览模板列表（卡片视图）
- 深入查看模板详情（弹窗视图）
- 流畅的切换体验

---

## 💎 设计方案（参考 Figma + Notion）

### 交互模式：渐进式展示

```
卡片 Hover → 显示简要信息 + "点击查看详情"提示
        ↓
  点击卡片 → 打开模态弹窗
        ↓
    弹窗展示 → 完整详细信息
```

### 弹窗布局设计

```
┌─────────────────────────────────────────────────────────────┐
│  [标题 + 徽章]                    [← →] [✕]                  │
├──────────────────────────┬──────────────────────────────────┤
│                          │                                  │
│   [大尺寸预览图]          │   📊 元数据信息                   │
│   - 支持点击放大          │   - 时长、难度                    │
│   - 渐变背景              │   - 使用次数、评分                │
│   - 缩放提示              │                                  │
│                          │   📝 模板说明                     │
│                          │                                  │
│                          │   🏷️ 相关标签                    │
│                          │                                  │
│                          │   💡 适用场景                     │
│                          │                                  │
│                          │   ✓ 核心功能                      │
│                          │                                  │
│                          │   👤 作者信息                     │
├──────────────────────────┼──────────────────────────────────┤
│                          │   [使用此模板] (主按钮)            │
│                          │   [收藏] [点赞] [分享]            │
│                          │   💡 快捷键提示                   │
└──────────────────────────┴──────────────────────────────────┘
```

---

## ✨ 功能特性

### 1. 视觉设计
- **左侧预览区**：大尺寸预览图，支持点击放大/缩小
- **右侧信息面板**：完整的模板详情信息
- **顶部导航**：标题、徽章、前后翻页按钮、关闭按钮

### 2. 交互细节
- **键盘快捷键**：
  - `ESC` - 关闭弹窗
  - `←` - 上一个模板
  - `→` - 下一个模板
- **卡片增强**：
  - Hover 显示"点击查看详情"遮罩
  - 点击卡片打开详情
  - 点击"使用"按钮直接使用（阻止冒泡）

### 3. 详细信息展示
- **基础信息**：时长、难度、使用次数、评分
- **描述性内容**：模板说明、适用场景、核心功能
- **标签系统**：可点击的标签，支持快速筛选
- **作者信息**：显示模板创建者

### 4. 操作功能
- **使用模板**：主按钮，渐变背景
- **收藏**：保存到个人收藏夹
- **点赞**：为模板点赞
- **分享**：分享模板链接

---

## 🎨 设计亮点

### 1. 渐进式信息架构
```
Level 1: 卡片列表 → 快速扫描（标题、图标、标签）
Level 2: Hover 状态 → 简要预览（完整描述 + 提示）
Level 3: 详情弹窗 → 深度了解（所有信息 + 操作）
```

### 2. 视觉层次
- **主要信息**：大字号标题、醒目的操作按钮
- **次要信息**：灰色文字、小图标
- **辅助信息**：浅色背景区块、边框分隔

### 3. 动画效果
- 弹窗打开/关闭：淡入淡出 + 缩放
- 图片放大：平滑过渡
- 按钮交互：hover 状态变化

### 4. 响应式设计
- 大屏（≥1280px）：完整双栏布局
- 中屏：自适应调整
- 小屏：堆叠布局（预览在上，信息在下）

---

## 📦 实现组件

### 新增组件
- `TemplateDetailModal` - 模板详情弹窗主组件

### 更新组件
- `TemplateCard` - 添加 `onClick` 回调
- `TemplateGallery` - 集成弹窗逻辑

### 类型扩展
```typescript
interface DiagramTemplate {
  // ... 现有字段
  usageCount?: number;     // 使用次数
  rating?: number;         // 评分 (1-5)
  author?: string;         // 作者
  useCases?: string[];     // 适用场景
  features?: string[];     // 核心功能
}
```

---

## 🎯 用户体验流程

### 浏览模板
```
1. 用户进入模板库
2. 网格/列表视图浏览
3. Hover 查看简要信息
```

### 查看详情
```
1. 点击感兴趣的模板卡片
2. 弹窗打开，展示完整信息
3. 可以：
   - 查看大图预览（点击放大）
   - 阅读详细说明
   - 查看适用场景和功能
   - 使用 ←→ 快速浏览其他模板
```

### 使用模板
```
方式1: 卡片上点击"使用模板"按钮
方式2: 详情弹窗中点击"使用此模板"按钮
```

---

## 🔧 技术实现要点

### 1. Dialog 组件
- 使用 Radix UI Dialog
- 自定义样式覆盖默认样式
- 最大宽度 `max-w-6xl`
- 高度 `85vh`

### 2. 键盘事件监听
```typescript
useEffect(() => {
  const handleKeyDown = (e: KeyboardEvent) => {
    if (e.key === "Escape") onClose();
    if (e.key === "ArrowLeft") onPrevious();
    if (e.key === "ArrowRight") onNext();
  };
  window.addEventListener("keydown", handleKeyDown);
  return () => window.removeEventListener("keydown", handleKeyDown);
}, [isOpen]);
```

### 3. 模板导航逻辑
```typescript
// 当前筛选结果中的索引
const detailTemplateIndex = filteredTemplates.findIndex(
  t => t.id === detailTemplateId
);

// 前后翻页
const hasNext = detailTemplateIndex < filteredTemplates.length - 1;
const hasPrevious = detailTemplateIndex > 0;
```

### 4. 图片缩放
```typescript
const [imageZoomed, setImageZoomed] = useState(false);
// 点击切换
onClick={() => setImageZoomed(!imageZoomed)}
// CSS transform
className={cn(imageZoomed && "scale-150")}
```

---

## 📱 响应式适配

### 桌面端（≥1280px）
- 双栏布局：左侧预览 + 右侧详情
- 完整功能

### 平板端（768px - 1279px）
- 单栏布局：预览在上，详情在下
- 保持所有功能

### 移动端（<768px）
- 全屏弹窗
- 简化部分次要信息
- 优先显示核心内容

---

## 🎨 视觉规范

### 颜色系统
- **主色**：模板渐变色（动态）
- **中性色**：
  - 标题：`text-slate-900`
  - 正文：`text-slate-600`
  - 辅助：`text-slate-500`
- **功能色**：
  - 成功：`green-*`
  - 警告：`amber-*`
  - 信息：`blue-*`

### 间距系统
- **外边距**：`px-6 py-4`（一致性）
- **内部间距**：`space-y-6`（垂直节奏）
- **组件间距**：`gap-3`（紧凑）

### 圆角半径
- **卡片**：`rounded-xl`
- **按钮**：`rounded-lg`
- **标签**：`rounded-full`

---

## 🚀 未来优化方向

### 1. 增强功能
- [ ] 模板对比功能（选择多个模板对比）
- [ ] 在线预览编辑
- [ ] 模板评论系统
- [ ] 自定义收藏夹分类

### 2. 性能优化
- [ ] 图片懒加载
- [ ] 虚拟滚动（大量模板时）
- [ ] 预加载相邻模板数据

### 3. 体验优化
- [ ] 添加模板使用教程视频
- [ ] 相关模板推荐
- [ ] 个性化模板推荐算法

---

## 📊 成功指标

### 用户体验指标
- 模板查看详情率 > 30%
- 从详情页使用模板率 > 40%
- 键盘快捷键使用率 > 15%

### 交互指标
- 平均查看时长 > 15秒
- 收藏/点赞率 > 10%
- 前后翻页使用率 > 20%

---

## 🎉 总结

这个设计方案参考了 Figma 和 Notion 等成熟产品的最佳实践，提供了：

1. **清晰的信息层次** - 从卡片到详情的渐进式展示
2. **流畅的交互体验** - 键盘快捷键、平滑动画
3. **完整的功能闭环** - 浏览、查看、使用、收藏
4. **优雅的视觉设计** - 现代化 UI、精心的间距和配色

用户可以快速浏览模板列表，深入查看感兴趣的模板详情，最终顺利使用模板开始创作。
